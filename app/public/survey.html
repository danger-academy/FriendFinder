<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Play Date | Survey</title>
    <!-- Link Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Ubuntu|Vollkorn" rel="stylesheet">
    <!-- Link Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns"
        crossorigin="anonymous">
    <!-- Link Bootstrap Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <!-- Link Customized CSS -->
    <link href="./style.css" rel="stylesheet" type="text/css">
    <link href="images/teddy-bear_1f9f8.ico" rel="icon" type="image/x-icon" />

</head>

<body>
    <div id="survey" class="jumbotron jumbotron-fluid">
        <div class="container">
            <!-- jumbotron -->
            <div class="my-header jumbotron text-center hoverable p-4">

                <h1 class="display-4">
                    <img class="logo" src="images/play.png" alt="image of children playing" />Play Date FriendFinder</h1>
                <hr class="my-4">
                <p class="lead"> <i class="fas fa-poll-h"></i> Survey Question</p>
                <p>Take this quiz to find a parent with a matching parenting style!</p>

            </div>
            <!-- jumbotron -->
        </div>
    </div>
    <div class="container">


        <!-- Survey Page -->
        <div class="row">
            <div class="col-lg-12">


                <div class="card">
                    <div class="card-header">
                        <h1>About You</h1>
                    </div>

                    <div class="card-body">
                        <form role="form" class="px-4 py-4" method="POST">
                            <!-- Name and Photo -->
                            <div class="form-group row">
                                <label for="user-name" class="col-sm-2 col-form-label">Name (Required)</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control form-control-plaintext" id="user-name"
                                        placeholder="Your Name Here">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="user-photo" class="col-sm-2 col-form-label">Link to Photo Image (Required)</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="user-photo" placeholder="http://yourImageURLhere.com">
                                </div>
                            </div>

                            <!-- Name and Photo -->


                            <!-- Here we'll use a Likert Scale questionnaire for parental matching -->
                            <!-- Part I: Philosophy -->
                            <hr>
                            <h3>Part I: Philosophy</h3>
                            <!-- Question 1 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q1">
                                    <h4>Question 1 </h4><br>
                                    <p>If we want children to show US respect, we must first show THEM respect.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 1 -->
                            <!-- Question 2 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q2">
                                    <h4>Question 2 </h4><br>
                                    <p>Society would benefit from parents being more strict with their children.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 2 -->
                            <!-- Question 3 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q3">
                                    <h4>Question 3 </h4><br>
                                    <p>Children first have to learn that the parent is in charge.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 3 -->
                            <!-- Question 4 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q4">
                                    <h4>Question 4 </h4><br>
                                    <p>If parents set a strong example, children will pretty much raise
                                        themselves.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 4 -->
                            <!-- Question 5 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q5">
                                    <h4>Question 5 </h4><br>
                                    <p>Childhood is brief, and parents should first-and-foremost make it as enjoyable
                                        as possible.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 5 -->
                            <!-- Part II: Actions -->
                            <hr>
                            <h3>Part II: Actions</h3>
                            <!-- Question 6 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q6">
                                    <h4>Question 6 </h4><br>
                                    <p>It is better to 'go along to get along' than to stand firm
                                        and potentially provoke a struggle.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 6 -->
                            <!-- Question 7 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q7">
                                    <h4>Question 7 </h4><br>
                                    <p>Rather than giving instructions, I prefer to give my child a choice between
                                        appropriate options.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 7 -->
                            <!-- Question 8 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q8">
                                    <h4>Question 8 </h4><br>
                                    <p>I admonish my child to not interrupt when grown-ups are speaking.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 8 -->
                            <!-- Question 9 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q9">
                                    <h4>Question 9 </h4><br>
                                    <p>When my child misbehaves, he or she understands there will be consequences.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 9 -->
                            <!-- Question 10 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q10">
                                    <h4>Question 10 </h4><br>
                                    <p>I try to set clear expectations for my child in any given situation.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 10 -->

                            <!-- Submit Button -->
                            <div class="buttons">

                                <button type="button" class="submit btn-lg btn-outline-secondary" data-toggle="modal"
                                    data-target="#friendModal">Submit</button>
                            </div>

                    </div>
                    </form>
                </div>
            </div>



        </div>
    </div>
    <!-- Survey Page -->
    <!-- Footer -->
    <footer class="footer my-4">
        <hr>
        <div class="text-center center-block">
            <p><a href="/"><span class="fa fa-home"></span></a> | <a href="/api/friends">API Friends Link</a> | <a href="https://github.com/danger-academy/FriendFinder"
                    target="_blank">GitHub Repo</a></p>



        </div>
        <hr>
    </footer>
    <!-- Footer -->

    </div>

    <!-- Modal -->
    <div class="modal fade" id="friendModal" tabindex="-1" role="dialog" aria-labelledby="friendModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="friendModalLabel">Congratulations, <span id="yourName"></span>!</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <div class="row text-center">
                        <div class="col-sm-6">
                            <div class="circle">
                                <img id="yourPicture" class="profile-pic centered-and-cropped" src="">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="circle">
                                <img id="friendPicture" class="profile-pic centered-and-cropped" src="">
                            </div>
                        </div>

                    </div>
                    <div class="row text-center">
                        <span id="message"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Modal -->
    <div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="modalInvalidNameImageURL"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalInvalidNameImageURL">Invalid Name or Image URL</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="lead">Please type a name with more than one character, and place a link of an Image url
                        with .jpeg, .jpg, .gif, .png file name.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    </script>


    <!-- Client-side Javascript handles how from data is sent to our server. -->
    <script type="text/javascript">
        $(".submit").on("click", function (event) {
            event.preventDefault();

            var inputName = $("#user-name").val().trim();
            var inputImageUrl = $("#user-photo").val().trim();

            // Check if user input is valid
            if ((inputName !== "") && (checkImageURL(inputImageUrl))) {
                // Grab the form elements
                var newFriend = {
                    name: inputName,
                    photo: inputImageUrl,
                    scores: [
                        $('input[name=q1]:checked').val(),
                        $('input[name=q2]:checked').val(),
                        $('input[name=q3]:checked').val(),
                        $('input[name=q4]:checked').val(),
                        $('input[name=q5]:checked').val(),
                        $('input[name=q6]:checked').val(),
                        $('input[name=q7]:checked').val(),
                        $('input[name=q8]:checked').val(),
                        $('input[name=q9]:checked').val(),
                        $('input[name=q10]:checked').val()
                    ]

                }
                console.log("newFriend:", JSON.stringify(newFriend));
            } else {
                // Pop open the modal dialog
                $('#alertModal').modal('show')
            };

            // Send object to URL 
            var currentURL = window.location.origin;
            $.post(currentURL + "/api/friends", newFriend, function (data) {

                console.log("responses data:", JSON.stringify(data));
                console.log("Matching friends");

                // Set the name and image values of friend match modal
                $("#yourName").text(newFriend.name)
                $("#yourPicture").attr("src", newFriend.photo);
                $("#friendPicture").attr("src", data.matchImage);
                $("#message").text("Your match is " + data.matchName);


                // Clear the form when submitting
                $("#user-name").val("");
                $("#user-photo").val("");
                $("#q1").val("");
                $("#q2").val("");
                $("#q3").val("");
                $("#q4").val("");
                $("#q5").val("");
                $("#q6").val("");
                $("#q7").val("");
                $("#q8").val("");
                $("#q9").val("");
                $("#q10").val("");

                // Pop open the modal dialog
                $('#friendModal').modal('show')

            });
            return false;
        });

        function checkImageURL(url) {
            return (url.match(/\.(jpeg|jpg|gif|png)$/) != null);
        }
    </script>
</body>

</html>